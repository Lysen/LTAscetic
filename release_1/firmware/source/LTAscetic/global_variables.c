/**************************************************************************************
* œÓ‚ÂÍ‡
***************************************************************************************/


#include <avr/io.h>        // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º–µ–Ω–∞ –¥–ª—è –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞-—ã–≤–æ–¥–∞
#include <util/delay.h>    // –î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏
#include <avr/interrupt.h> // –ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
#include <avr/pgmspace.h>  //–ë—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º
#include "types.h"
volatile uint16_t timer1; 


volatile bool start_bit_received;				//–≠—Ç–æ—Ç —Ñ–ª–∞–≥ —É—Å—Ç–∞–Ω–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç —Å—Ç–∞—Ä—Ç-–±–∏—Ç

volatile uint16_t high_level_counter; 			//–°—á–µ—Ç—á–∏–∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–∞ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–∞ –≤—ã–≤–æ–¥–µ –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫–∞										
												//–∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º


volatile uint16_t bit_in_rx_buff; 				//–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏—Ç, –ø—Ä–∏–Ω—è—Ç—ã—Ö –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫–æ–º 

volatile trx_event rx_event; 					//—Å–æ–±—ã—Ç–∏—è –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫–∞

volatile uint16_t low_level_counter; 			//–°—á–µ—Ç—á–∏–∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–∞ –≤—ã–≤–æ–¥–µ –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫–∞										
												//–∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º


volatile uint8_t rx_buffer[RX_BUFFER_SIZE]; 	//–ë—É—Ñ—Ñ–µ—Ä –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫–∞

volatile uint8_t tx_buffer[TX_BUFFER_SIZE]; 	//–ë—É—Ñ—Ñ–µ—Ä –ò–ö-–ø—Ä–∏–µ–º–Ω–∏–∫–∞


volatile bool ir_transmitter_on;	//—Ñ–ª–∞–≥, —Ä–∞–∑—Ä–µ—à–∞—é—à–∏–π (true) –∏–ª–∏ –∑–∞–ø—Ä–µ—â–∞—é—â–∏–π –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ò–ö-–¥–∏–æ–¥ 

volatile int ir_pulse_counter; 					//–û–±—Ä–∞—Ç–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ "–≤—Å–ø—ã—à–µ–∫" –ò–ö-–¥–∏–æ–¥–∞

volatile int ir_space_counter; 					//–û–±—Ä–∞—Ç–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ò–ö-–¥–∏–æ–¥–∞ (–ø–∞—É–∑–∞ –º–µ–∂–¥—É –±–∏—Ç–∞–º–∏) 

volatile union data_packet_union  data_packet; 	//–í —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±—É–¥–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ IR


volatile uint8_t cursor_position;				//–≠—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω–¥–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö data_packet.data[x]

volatile union data_packet_union  data_packet; 	//–í —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±—É–¥–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ IR

volatile trx_packet rx_packet;

volatile uint8_t life; //—É—Ä–æ–≤–µ–Ω—å –∂–∏–∑–Ω–∏ (–∑–¥–æ—Ä–æ–≤—å–µ)

volatile uint8_t life_leds_status[4]; //—ç—Ç–æ—Ç –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è 

volatile TKEYBOARD_EVENT  keyboard_event; //—Å–æ–±—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã 

volatile struct pressing_duration key_pressing_duration;//—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–∏—Ç —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫

volatile uint8_t fire_led_status; //—Å—Ç–∞—Ç—É—Å —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ –≤—Å–ø—ã—à–∫–∏ –≤—ã—Å—Ç—Ä–µ–ª–∞ 

volatile uint16_t bullets;  //–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ä–æ–Ω–æ–≤ –≤ —Ç–∞–≥–µ

volatile uint16_t last_simple;					//–ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤—ã–±–æ—Ä–∫–∏ –∑–≤—É–∫–∞


//–ú–∞—Å—Å–∏–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞. –†–µ–∞–ª—å–Ω—ã–π —É—Ä–æ–Ω = damage_value[Damage_xx]
uint8_t damage_value [] PROGMEM = 
{
	1,   // 0000 = 1   (Damage_1)
	2,   // 0001 = 2   (Damage_2)
	4,   // 0010 = 4   (Damage_4)
	5,   // 0011 = 5   (Damage_5)
	7,   // 0100 = 7   (Damage_7)
	10,  // 0101 = 10  (Damage_10)
	15,  // 0110 = 15  (Damage_15)
	17,  // 0111 = 17  (Damage_17)
	20,  // 1000 = 20  (Damage_20)
	25,  // 1001 = 25  (Damage_25)
	30,  // 1010 = 30  (Damage_30)
	35,  // 1011 = 35  (Damage_35)
	40,  // 1100 = 40  (Damage_40)
	50,  // 1101 = 50  (Damage_50)
	75,  // 1110 = 75  (Damage_75)
	100, // 1111 = 100 (Damage_100)

};

